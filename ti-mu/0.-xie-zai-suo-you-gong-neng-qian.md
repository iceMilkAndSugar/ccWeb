---
description: 这里是我们写功能前需要的编码主要，是main.js的点击文件弹出功能框的实现
---

# 0.写在所有功能前

## main.js的点击文件配置

{% code-tabs %}
{% code-tabs-item title="main.jsp" %}
```javascript
<script>
	//获得选择的对象
	function getSelected(){
		var selected = $('label.table-checkboxposition.checked')
		return selected
	}
	//获取所选对象的路径
	function getSelectedPath(){
		var selected = getSelected()
		var filepath = []
		$(selected.parents("tr").find("td.table-path")).each(function(){
				filepath.push($(this).text())
			}
		)
		return filepath
	}
	
	//显示工具栏
	function show(){
		setTimeout(function(){
			var selected = getSelected()
			if(selected.size()>0){
				$('button#delete').show()
				$('a[type="button"]#download').show()
				$('a#copy').show()
				$('a#move').show()
				if(selected.size()==1){
					$('button#rename').show()
					$('a#selectColumn').show()
				}else{
					$('button#rename').hide()
					$('a#selectColumn').hide()
				}
			}else{
				$('button#delete').hide()
				$('a[type="button"]#download').hide()
				$('button#rename').hide()
				$('a#copy').hide()
				$('a#move').hide()
				$('a#selectColumn').hide()
			}
		},100)
	}
	</script>
```
{% endcode-tabs-item %}
{% endcode-tabs %}

{% hint style="success" %}
 题外话现在的话JS 提倡不写分号，虽然在某些情况下JS是要写分号的不然会出现问题。

  \[ 、 \( 、 + 、 - 之前加分号就可以了 ****[**贴个知乎的链接**](https://www.zhihu.com/question/20298345)
{% endhint %}

可以注意到的上面`show()`函数 里面套了一个`setTimeout()`  这个时间函数，原因是在`js`里异步执行是常态 我们`getSelected()` 还在执行的时候后面的代码已经执行完了所以会出现如下的诡异情况.比赛的时候我们还在在用`jQuery` 不合适用`es6` + 似乎没什么特别好的办法方法有很多但是如上的方法正对比赛计较简单合适\(实际开发不能这样写 应为不能正确的判断`getSelected()` 啥时候结束）正确的方法应该是准备的判断--可以[异步转同步](https://segmentfault.com/q/1010000012347682/a-1020000012347994) 也可以用其他的方式

![](../.gitbook/assets/gnk.gif)



